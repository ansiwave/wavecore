from ./db/entities import nil
from ./client import nil
from ./ed25519 import nil
from ./paths import nil
from ./common import nil
from os import `/`

const
  logo =
    """
[0m[40m                                                                                [0m
[0m[40m                                                                                [0m
[0m[40m                               [34m░[37m                                                [0m
[0m[40m                     [34m■▄▄[37m       [34m▓▄▄▄[37m      [34m░[37m       [34m░░[37m  [34m▄[37m [34m▀▀▀▀▀■[37m                   [0m
[0m[40m                    [34m░[37m [34m▀▀▀▀▀▀▓▓▄▄▄ [1;44m░░[22;40m▄ ▄▄▄▓▓▄▄▄▄▄▄▄▄▄▄■[37m [1m■[46m▓▓[45;36m█[22;40m  [34m▌▌[37m                 [0m
[0m[40m                    [34m▓[35m [1;37m█████▄■[22m  [1m▄▄▄▄▄[22m [1m▄▄▄[22;35m [34m▀[37m  [1m▄▄▄▄▄▄▄▄▄▄[36m░▀▀▀▀[22m [1;44;34m░░[22;40m▀[37m                 [0m
[0m[40m                  [1;34m▄[22m▌[1;44m░[22;40;35m [1;46;37m▓▓[45;36m█[40m▀[45m█[46;37m▓▓[40m▓[22m [1;46m▓▓[40;36m███[45m█[40m█[46;37m▓▓█[40m▌[22m [1;46m▓▓▓[40;36m██▀[45m██[46;37m▓[40m██[22m [1;46m▓▓[45;36m██[22;40m  [34m▄▄[37m  [34m▄[37m              [0m
[0m[40m                 [1;34m▀[22m▄[1;44m░[22;40m▀[37m [1;36m▄▄▄▄[45m███▓[22;40m [1;45;36m▓[40m████[45m███[40m███[22m [1;45;36m█[40m██[45m██[40m▄▄▄[37m▄▄[22;35m  [1;45;36m████[22;40m  [34m▄▄[37m   [34m░[37m             [0m
[0m[40m              [34m▀[37m [34m▓[37m [1;44;34m░[22;40m [1;36m▄[45m▓▓▓▓▓▓▓▓▒[22;40m░[1;45m▒▓▓▓▓▓▓▓▓▓▓[40m░░▀▀▀[45m▓▓▓▓▓▓▒[22;40m [1;45;36m▓▓▓▓[22;40m  [34m▀▀[37m [34m:[37m               [0m
[0m[40m              [34m▄[37m [1;44;34m░[22;40m [34m▓[37m [1;45;36m▒▒▒▒[40;37m▄▄[45;36m▒▒▒░[22;40m▒[1;45m░▒▒▒▒[22;40m [1;45;36m▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░[22;40m░[1;45m▒▒▒▒[22;40m  [1;44;34m░░[22;40m [34m▄[37m               [0m
[0m[40m                [34m▬[37m [34m▒[37m [1;45;36m░░░░░[46;35m▒▒▒[45;36m░ [22;40m [1;45;36m ░░░░[22;40m [1;45;36m░░░░░░░░░░░░░░░░ [22;40m [1;45m░░░░[22;40m  [34m▓[1;44m▒▒[22;40m▄▀▄[37m [34m▄[37m           [0m
[0m[40m            [1;44;34m░░[22;40m▄[37m   [34m░░_[1;30m▀[22;35m▀▀▀[1m▀▀▀[22m▀[1;30m▀[22m [1;30m▀[22;35m▀▀▀▀[37m  [1;30m▀▀[22;35m▀▀▀▀▀▀▀▀▀▀▀▀[1;30m▀[22;35m  [1;30m▀[22;35m▀▀▀[37m [34m░░ ▀[1;44m░░[22;40m▄[37m             [0m
[0m[40m             [34m▀█[37m [35m█████[37m  [35m▬[37m [35m▀▀▀[37m  [35m████[1;45;30m▀▀[22;40;35m▄[1;30m▄[22m  [1;30m▄[22;35m▄[1;45;30m▀[22;40;35m██ [1;45;30m▀▀[22;40;35m███  ▄[1;45;30m▀[22;40;35m███████▄[37m  [34m▀▓[37m [1;34m▒[22m           [0m
[0m[40m            [34m▀■█[37m [35m█████[37m [35m▓▓[37m [35m▀▀▀[37m  [35m███▀████[1;30m▓[22m [35m█████[37m [35m█████[37m [1;45;30m▀[22;40;35m████[1;45;30m▄[22;40;35m▀▀███[1;45;30m▀[22;40m  [34m░[37m [34m▄[37m           [0m
[0m[40m              [34m█[37m [1;45;34m░░░░░[22;40m [1;45;34m░░[22;40m [1;45;34m░░░[22;40m [34m░[37m [35m▄▄▄[1;45;34m░░░░░[22;40;35m▒[1;45;34m░░░░░[22;40m [1;45;34m░░░░░[22;40;35m▒[1;45;34m░░░░░░░░░░░░[22;40m    [34m▀[37m           [0m
[0m[40m            [34m■[37m [34m█[37m [1;45;34m▒▒▒▒▒[22;40;35m [1;45;34m▒▒▒▒▒▒[40m░▄[45m▒▒▒▒▒▒▒▒▒[22;40;35m░[1;45;34m▒▒▒▒▒[22;40m [1;45;34m▒▒▒▒▒[22;40;35m░[1;45;34m▒▒▒▒▒▒▒▒▒▒▒▒[22;40m  [34m▌[37m [1;44;34m░[22;40m           [0m
[0m[40m            [34m▄[37m [1;44;34m░[22;40m [1;45;34m▓▓▓▓▓▓▓▓▓▓▓▓[40m▒[45m▓▓▓▓[22;40;36m▄▄[1;45;34m▓▓▓▓[22;40m [1;45;34m▓▓▓▓▓[40m▄[45m▓▓▓▓▓[22;40m [1;45;34m▓▓▓▓[40m▄▄▄▄▄▄[22m [1;34m▄[22m [34m▀▓[37m [34m▓[37m           [0m
[0m[40m              [1;44;34m▒[22;40m [1;30m▀[45;34m██████████[40;30m▀[22m [1;45;34m██████████[22;40m  [1;45;34m█████████[40m▌[22m [1;34m▀[45m█████████[22;40m [1;45;34m█[22;40m  [34m█[37m [34m▒[37m           [0m
[0m[40m            [1;44;34m░[22;40m [1;44;34m▓[22;40m▄[37m  [1;30m▀[34m▀▀▀▀▀▀[30m▀[22m    [1;30m▀[34m▀▀▀▀▀▀▀[30m▀[22m   [1;30m▀[34m▀▀▀▀▀▀[30m▀[22m    [1;30m▀▀[34m▀▀▀▀▀▀[22m [1;30m▀[22m  [34m▀[37m             [0m
[0m[40m            [34m▀▄[1m▀▓▄[22m          [34m▄[37m [34m▒[37m          [1;44;34m▓[22;40m▄[37m          [34m▄[37m            [1;34m▄▀[22m             [0m
[0m[40m              [34m▀▄▒[37m [34m░▒▓██████▀[37m [34m▓▓[37m [34m▓▓███[1;44m░░[22;40m [1;44;34m░[22;40m▀▀▀▀ ▀▀▀▀▀[37m  [34m▀■▄▄▄▄[37m  [34m▄[1;44m▄▄[40m▀[22m▄▀[37m             [0m
[0m[40m                [34m░[37m        [34m▀[37m    [34m█[37m [34m▒[37m       [34m░▀▀▀▀▀▀▀▀▀▀▀▀[37m       [34m▀▀▀[1;44m▒[22;40m▀[37m               [0m
[0m[40m                              [34m▄[37m                                [1;34m░[22m                [0m
[0m[40m                                                                                [0m
[0m[40m                                                                                [0m
[0m[40m                                                                       φlda     [0m"""
  subboard1Text =
    """
 ▄▄▄       ███▄    █   ██████  ██▓    ▄▄▄       ██▀███  ▄▄▄█████▓
▒████▄     ██ ▀█   █ ▒██    ▒ ▓██▒   ▒████▄    ▓██ ▒ ██▒▓  ██▒ ▓▒
▒██  ▀█▄  ▓██  ▀█ ██▒░ ▓██▄   ▒██▒   ▒██  ▀█▄  ▓██ ░▄█ ▒▒ ▓██░ ▒░
░██▄▄▄▄██ ▓██▒  ▐▌██▒  ▒   ██▒░██░   ░██▄▄▄▄██ ▒██▀▀█▄  ░ ▓██▓ ░ 
 ▓█   ▓██▒▒██░   ▓██░▒██████▒▒░██░    ▓█   ▓██▒░██▓ ▒██▒  ▒██▒ ░ 
 ▒▒   ▓▒█░░ ▒░   ▒ ▒ ▒ ▒▓▒ ▒ ░░▓      ▒▒   ▓▒█░░ ▒▓ ░▒▓░  ▒ ░░   
  ▒   ▒▒ ░░ ░░   ░ ▒░░ ░▒  ░ ░ ▒ ░     ▒   ▒▒ ░  ░▒ ░ ▒░    ░    
  ░   ▒      ░   ░ ░ ░  ░  ░   ▒ ░     ░   ▒     ░░   ░   ░      
      ░  ░         ░       ░   ░           ░  ░   ░              
                                                                 
artwork made out of ANSI block characters like the almighty intended

only hand-made art please...images belong in random"""
  subboard2Text =
    """
        .__    .___.__                       .__        
  _____ |__| __| _/|__|   _____  __ __  _____|__| ____  
 /     \|  |/ __ | |  |  /     \|  |  \/  ___/  |/ ___\ 
|  Y Y  \  / /_/ | |  | |  Y Y  \  |  /\___ \|  \  \___ 
|__|_|  /__\____ | |__| |__|_|  /____//____  >__|\___  >
      \/        \/            \/           \/        \/ 

code that plays MIDI music, or "sound" if you have no musical talent"""
  subboard3Text =
    """
 ▄▄▄▄▄▄   ▄▄▄▄▄▄ ▄▄    ▄ ▄▄▄▄▄▄  ▄▄▄▄▄▄▄ ▄▄   ▄▄ 
█   ▄  █ █      █  █  █ █      ██       █  █▄█  █
█  █ █ █ █  ▄   █   █▄█ █  ▄    █   ▄   █       █
█   █▄▄█▄█ █▄█  █       █ █ █   █  █ █  █       █
█    ▄▄  █      █  ▄    █ █▄█   █  █▄█  █       █
█   █  █ █  ▄   █ █ █   █       █       █ ██▄██ █
█▄▄▄█  █▄█▄█ █▄▄█▄█  █▄▄█▄▄▄▄▄▄██▄▄▄▄▄▄▄█▄█   █▄█

nothing is off-topic"""
  jabbaAnsi =
    """
[0m[40m                                                                                [0m
[0m[40m                                                        [33m▄▄▄[37m                     [0m
[0m[40m                                                     [33m▄[1;43;30m░░[31m░░░░░▒[40m▄▄[22;33m▄[37m               [0m
[0m[40m                                                   [1;30m▄[43m▒░[22;40;33m▀▀▀██[1;43;31m▒▓▓[22;40;33m▀▀[1;31m▀▀█▄[22;33m▄[37m           [0m
[0m[40m                                                 [1;30m▄▀▀[33m▄[22m [1;43;37m█[40;33m█[43m░[22;40m [1;43;30m░[22;40;33m█[1;43;31m░▓[22;40;33m █[1m█[22m [1;37m▄[33m▄[31m▀▀[43m▄[22;40;33m▄[37m        [0m
[0m[40m                                               [1;30m▄▀[22;33m ▀[1m▀▀[22m [1m▀[22m▄▄[1;43;30m▒[22;40;33m███[1;43;31m░▄[40m▄▄[22;33m▄ [1;37m▀[33m▀[22m▀ [1;43;31m▄[33m [22;40m▄[37m      [0m
[0m[40m                                            [1;30m▄▄████[43m▓▓▒▒▒[22;40;33m▀▀  [1;43;31m▀▀[22;40;33m█▄▄ ▀▀██[1;43;31m░░▒▓▄▄[22;40;33m▄▄[37m   [0m
[0m[40m                                          [1;30m░▒▓████[43m▓▓▓▒▒░░░[22;40;33m▀▀▀▀▀▀▀▀▀▀███[1;43;31m░▒▒▒▀▀▀[22;40;33m█▄[37m [0m
[0m[40m                                            [1;30m▀▀▀█████▀▀[22;33m ▄▄▄[1;43;30m░░░[31m▀▀[22;40;33m█▄▄▄▄ ▀▀██▀▀[37m     [0m
[0m[40m                                              [1;30m▀▄▄▄▄▄█[43m▓▓▒░░[22;40;33m█▀▀▀▀▀▀██[1;43;31m░░▒▒▓██▀▀[22;40;33m▀[37m   [0m
[0m[40m                                                 [1;30m▀▀▀███[43m▒▒[22;40;33m▄▄▄████▄▄███[1;43;31m░░░[22;40;33m█▀▀[37m     [0m
[0m[40m                                                       [1;30m▀▀[22;33m▀▀▀▀▀▀▀▀▀▀▀[37m            [0m
[0m[40m                      [32m▄▄▄▄▄▄[33m▄▄▄[37m                                                 [0m
[0m[40m                 [32m▄[1;42m▒▒░░[22;43m█▓▓▒▒░░[40;33m█▓▓▓▄▄[37m                                             [0m
[0m[40m               [32m▄[1;42m▄▓[22;40m█▀▀▀▀▀[43m▒░░░[40;33m█[1;43;37m░ [22;40;33m▀▀▀▀█▄[37m               [33m                      [37m      [0m
[0m[40m    [33m   [37m      [32m▄[1;42m▄[33m█[32m▀[22;40m▀[33m▄[1;37m▄[22;33m [1m█[43m░[22;40m  [1;43;32m▒░[22;40;33m█[1;43;37m ░[22;40;33m [41m▒[1;43m▓[40m█[43;37m█[22;40;33m ▀█▄[37m                                         [0m
[0m[40m           [32m▄[1;42m▄[33m▓[32m▀[22;40m█[33m █[1m█[37m▓[22;33m [1m▀[22m▀▄[1;43;32m░▒▒░[22;40;33m█[1;43;37m [22;40;33m█▄▄▀[1m▀[22m [1m▀[22m ██▄▄[37m                                      [0m
[0m[40m        [32m▄▄[1;42m▄▓▓▓░[22;40m▄▄[33m▄▄▄▄█▀▀▀▄[1;43;32m░░[22;40;33m██ ▀▀██████[1;43;30m░░▒▒▓[40m▄[22m                                   [0m
[0m[40m     [32m▄[1;42m▄▄█▓▓▒▒[22;43m█▓▒▒░░[40;33m█▀▄▄▄▄████▓▓▄▄▄▄███[1;43;30m░░▒▒▓▓[40m▀[22m                                   [0m
[0m[40m    [32m▐[1;42m▒[22;40m▄▀▀▀[1;42m░░[22;43m▓▓▒▒░░[40;33m██▀▀▀          ▀▀▀▀[1;43;30m░░░[40m▀▀▄▄[22m                                    [0m
[0m[40m     [32m█[1;42m▒▒░░[22;43m█[40;33m▄▄  ▀      [31m░░[1;30m                 ▄▄█[22m                                    [0m
[0m[40m      [32m▀█[1;42m░░[22;43m▓▓▒░░[40;33m▄▄           [31m▄▄▄▄[33m       [1;30m▄▄[43m▓▓[40m▌[22m                                    [0m
[0m[40m        [32m▀█[43m▓▓▒▒▒░░[40;33m██▄▄▄▄     [31m▀[1;41m▓▒▒[22;40m▌[33m  ▄██[1;43;30m▒▒▒▒[40m▀[22m                                     [0m
[0m[40m          [32m▀▀▓[43m░░░░░░[40;33m█▓███▓▓▓▒ [31m▐[1;41m░░[22;40m█[33m █[1;43;37m░[30m░░░[40m█▀[22m                                       [0m
[0m[40m              [33m▀▀██████▀▀██▓▓▒ [31m█[1;41m░[22;40m▀[33m ████▀[37m                                         [0m
[0m[40m                   [33m▀▀████▄▄▄▄█▄▄██▀[37m        [33mZII[37m                                  [0m
[0m[40m                        [33m▀▀▀▀▀▀▀░[37m                                                [0m
    """
  hoganAnsi =
    """
[0m[40;37m                                                                                [0m
[0m[40m  [31mHulk Hogan                           ▄▄██████████[1;41m▄[22;40m▄▄                          [0m
[0m[40m[37m  [1;30mWWE Hall of Fame 2005         [22m    [31m▄[1;41m▄░ [22;40m█████████████[1;41m▀▄[22;40m▄                        [0m
[0m[40m[37m                                   [31m▐[1;41m█▌ [22;40m█████████████[1;41m░░▓█[22;40m▌                       [0m
[0m[40m[37m                                   [31m▐[1;41m▓ [22;40m█████████████▓▓▀[1;41m▀▓[22;40m▌                       [0m
[0m[40m                                   █[1;41m░[22;40m██████████████████▄▀                       [0m
[0m[40m                                   █████████████████████▄▌                      [0m
[0m[40m                                  ▐█████████▓▓▓▓▓▓████[1;41m░░▓[22;40m▌                      [0m
[0m[40m                                  █▓[41;33m▄[1m▄▄[40m▄[37m▄▄[33m▄[22m▄[31m [1;33m▄[43m▄▄▀▀[40m▀▀▀█[41;37m▄[22;40;31m█[37m [31m▄                      [0m
[0m[40m                                  ▀[1;33m█▌[22m    [1;33m [22m▀[1m██▌      [22m▐[1m█▀[22m [31m█[1;41m░[22;40m▌                     [0m
[0m[40m                                 [33m▐▌▀[1m▒[22m▄[37m   [33m▄[1;43m▄▀[22;40m░[1m▓[22m▄[37m  [33m ▄[1;43m▄▀[22;40m▀▄[1m▓▄[22;31m▀▌                     [0m
[0m[40m                                 [33m▐▓[1;47;31m▀[22;40;33m▄▀▀[1m▀▀▀[22m▄[1;47;31m▓█[22;40;33m▄[1m▀▀[22m▓[1;43m▀[40m▀[22m▀▄[1;43;31m▄[47m░[22;40m▄ [33m▄                      [0m
[0m[40m                                  ▓[37m▐[1;47;31m▓[43m▀[47m▓▄[43m▀[22;40;33m▀[1;47;31m▓▀▓[43m█▀[22;40;33m▀[1;43;31m▀[47m▄▓[43m▀[22;40;33m▀[1;47;31m▓[33m░▓[22;40m▐▌[31m▄                     [0m
[0m[40m                                  [33m [37m▐[1;43;31m█[22;40;33m▌[1;43;31m▀[22;40;33m▀▄[1;31m░[22m [33m▀▀[37m [33m░▓▄▀[1;43;31m█[47m▓[22;40;33m▌[1;47;31m▓ [33m░[22;40m█[1m [41;31m░[22;40m▌                    [0m
[0m[40m                                  [33m▐[1;31m▐[43m▌[22;40;33m▐[1;43m▄[40m▓▓██[37m██████▓[43;33m▄[31m▓[40m▌[47m▓░▄[22;40;33m▌[1;37m░[22;31m▐▌                    [0m
[0m[40m                                  [1;33m▐[22m [33m█[1m▐██▀[22m▄[1;31m▄▄▄▄▄[22;33m▄[1m▀█[37m█[43;33m▌[31m▓[47m▓[43m▀[22;40;33m▄▌[1;37m▓[33m [22;31m▀                    [0m
[0m[40m                                  [1;37m▐[43;33m▄[40m █[37m██[22;33m▐[1;43;31m██[22;40;33m▄▄▄[1;43;31m▄█[22;40;33m▌[1m█[37m█▓[43;31m▓[47m█[22;40;33m▄[1;47;31m▀[22;40m [1m█[33m▐[22m [31mn!                  [0m
[0m[40m                                  [1;37m▐[33m█[22m▌[1;37m▓██[31m▐[47m▓▓▓[43m████[22;40;33m▌[1m█[37m██[43;31m▀[22;40;33m▀[1;47;31m▀░[40;33m▐[37m█[33m▐▌                    [0m
[0m[40m                                  [43m▐[40m█▌[22m [1m▀▐[22;33m▐[1;47;31m░░░[43m█[47m▀[43m██[22;40;33m▌[1m█▌▀[22m▄[1;47;31m▓░▒[40;33m▐██▌                    [0m
[0m[40m                                 [22m▐[1m▓▌▓[22m [33m▓[1;31m▄[22;33m▄▀[1;43;31m▀[47m▄[22;40;33m▐[1;43;31m▓▓[22;40;33m▓▀░░▓[1;43;31m █[47m▓▓[40;33m▐▀▀▓                    [0m
[0m[40m                                 [22m▀[37m [1;33m▌▀[22m [1;43;31m▄[47m [22;40;33m▓▓[1;31m▄[22;33m▄▄▄▄▄▓▓▓[1;43;31m  ▓▀[22;40;33m▀[37m▄██▄▄[1;33m▄▄[22m▄                [0m
[0m[40m                               [33m ▀[37m▄██[33m [1;43;31m▄[47m ▐[43m░[22;40;33m█[1;47;31m░[43m░░ ▓▄[22;40;33m█[1;43;31m░░░ [22;40;33m▀[37m▄[1;47;33m░░░▄▓▓[22;40m▀[33m▄▄▄[1m▀              [0m
[0m[40m                            [22m▄▄▀[37m▄███ [1;43;31m▄[47m░░▐[43m▓▓[47m▓[43m▓▓▓██▓▓▀[22;40;33m▀[37m▄[1;47;33m▓▓▓[40m██[47m▀[22;40m▀[33m▄██[1;43;31m▄▓▄[22;40;33m▄             [0m
[0m[40m                         ▄▓▓▀[37m▄█[1;47;33m░░[22;40m█▌[33m▐[1;47;31m▓▓▓█[43m██[47m█[43m█[47m▓▓[43m█▓▀[22;40;33m▀[37m▄[1;47;33m▄██[40m██[47m▀[22;40m▀[33m▄[1;43;31m▄▓▓░░[22;40;33m██▀▀            [0m
[0m[40m                       ▄[1;43;31m▄░[22;40;33m█ [1;47m░░░▓▓[22;40m█[1;33m [43;31m▀███[40m█[43m████▀[40m▀[22;33m▀[37m▄[1;33m▄[47m▄[40m████[47m▀[22;40m▀[33m▄[1;43;31m▄██▀[22;40;33m█[1;43;31m▄▄[22;40;33m▄[1;43;31m▓▀[22;40;33m▓▓▓▄         [0m
[0m[40m                     ▄[1;43;31m▄▓▓[22;40;33m█[37m [1;47;33m░▓▓▓[40m██[47m▓▄[22;40m▄[33m▀[1;31m▀▓▓▓▀[22;33m▀[37m▄[1;33m▄[47m▄[40m███████[47m▀[22;40m [1;43;31m▄▀▄█▄[40m█[47m██[40m███[43m▄░░[22;40;33m█[1;43;31m▀▄[22;40;33m▄       [0m
[0m[40m                    [1;43;31m▄[47m▀▀█[43m▀[22;40m [1;47;33m▄▐[40m█████████[47m▄[40m▄▄▄[47m▄[40m██████████[47m▀[22;40m [1;43;31m▄▓▓[47m▓▓[40m███████[47m▓[43m▓▓  ▐█▄[22;40m      [0m
[0m[40m                   [1;47;31m▀[33m▄[31m░▄[43m▀[22;40m [1;47;33m▄█[40;37m██[33m███████████████████████[22m▌[33m▐[1;43;31m▓[22;40;33m█[1;43;31m█[47m░░▀▓▓[40m█[47m███░▓[43m█▌ ▐[40m█[47m▓▓[22;40m     [0m
[0m[40m               [1;31m   ▓[47m▓▓█[43m▀[22;40m [1;47;33m▄[40;37m████[33m█████████████████████[47m▓[40m█[22m [1;43;31m▓░[22;40;33m█[1;43;31m▐[40m█[47m▄[33m░▄[31m ▀███░▓[43m█▌░[40m██[47m░░▀[22;40m    [0m
[0m[40m              [1;31m   [22;33m▐▀[1;47;31m██[43m▀[22;40;33m░[37m▐[1;33m█[37m████[33m█████████████████████[47m░[40m█[22m [1;43;31m░[22;40;33m█▐[1;43;31m ▀▓▓[47m▄░░▓█[40m█[47m▓[43m█▓[22;40;33m█[1;43;31m▓[40m█[47m▓[22;40m█[1;47;33m░░[22;40m    [0m
[0m[40m             [1;31m    [22;33m▄[1;43;31m▄[47m█[43m░[22;40;33m▓[37m [1;47;33m▐▓[40;37m███[33m██████████████████████[47m▐▓[22;40m▌[33m▐▌▐[1;43;31m  ░░▀[47m▓▓▓█[40m██[43m▀[22;40;33m█[1;43;31m▐[40m██[47m░[22;40m█[1;47;33m▓▓[40;31m▌   [0m
[0m[40m               [22;33m▄[1;43;31m▄[47m██[43m░ [22;40;33m▓[37m [1;47;33m▓▒[40m████████[41m▀[40m█████████████████[47m░▀[22;40m [33m▓ ▀▓[1;43;31m  ▀▓[40m████[43m▌[22;40;33m██[1;43;31m▓[40m██[22m██[1;47;33m▒▒[22;40m▌   [0m
[0m[40m           [1;31m  [22;33m▄[1;43;31m▄[40m███[43m░░░ [22;40m [1;47;33m░░[41m▌▐▀▀[40m█[41m▀░▀█▀█▀▀[40m█[41m▀[40m█[41m▀[40m█[41m█[40m███████[47m▌[22;40m█[1;47;33m [40m [22m▓ ▄█[1;43;31m  ▐[47m▓▓█[40m█[43m▓▄[22;40;33m█[1;43;31m▓▓[40m█[47m░[22;40m█[1;47;33m░░[40;31m▌   [0m
[0m[40m            [43m▄[47m▀[40m██[43m▓▓▓▓░ [22;40;33m▌[37m▐█[1;41;33m▌▐ ░▄▌▀ ▌ ▀ ▐ ▌▐ ▐ █ [40m█[41m▀ ▐[40m██[47m░░[22;40m▀[33m▄█[1;43;31m░░░▄[40m███[47m█[40m█[43m▓░[22;40;33m█[1;43;31m░▒[40m█[47m▓[22;40m███    [0m
[0m[40m        [1;31m   [43m▄[47m▓[40m██[43m██[47m▀▄[43m█▓▌[22;40;33m▓[1m [22m█[1;47;33m▐[40m█[41m ▄▀ ▐ ▌▐░ ▌░ ▌▐ ░▌▐ ▀ [40m██[47m▀[22;40m█[31m [33m▓[1;43;31m▄▓▓▓▓[40m████[43m█▓░[22;40;33m██▓[1;43;31m░[40m██[22m█[1;47;33m░[31m▐[22;40m    [0m
[0m[40m       [1;31m   [43m▄[47m▀[40m███[43m█[47m▌▓[43m██░▓[22;40;33m▌[1m▐[47m▄[30m▓[41;33m▀▀█[40m█[41m▄▀[40m█[41m▄[40m█[41m▌▐▄[40m█[41m▐▌[40m█[41m▌▐░▌▐▌▐[40m█[47m░[22;40m█▌[33m▐[1;43;31m██[47m▓▓█[40m█████[43m██▓░[22;40;33m█▓▓[1;31m██[22m█[1;47;33m▒[22;40m▌    [0m
[0m[40m      [1;31m   [22;33m█▀[1;43;31m▀▄[40m█[47m█▓░▄[43m██ ░[22;40m [1;47;33m▐[40m█[47m▌[40m█████[41m█[40m███████████████[41m░[40m█[47m▌[22;40m██ [1;43;31m▓█[47m░░░▓▓[40m█████[47m▓▓[43m▓░[22;40;33m▓[1;43;31m░[40m█[47m▌[33m░▓[40;31m▌    [0m
[0m[40m         [22;33m▄[1;43;31m▄[40m██[47m▌▄█[43m█▓█▌[22;40;33m▓[1;43;31m [22;40m [1;47;33m▐[40m█████████████████████████[47m░[22;40m█▌[33m▐[1;31m█[22m██[1;47;33m  [31m░░▌▌[40m███[43m█[47m▓[43m█▓[22;40;33m█[1;43;31m▓[40m█[47m▌[33m░░[22;40m     [0m
[0m[40m    [1;31m   [22;33m▄[43;37m▄[1;40;31m███[43m▓▓▓█▓░█▌[22;40;33m▓▓[37m [1;33m█████████████████████████[47m▌[22;40m██▌[1;31m▐█[22m█[1;47;31m▌[33m▌▓▐[31m ▌▌[40m███[43m████[22;40;33m█[1;43;31m▐[40m█[47m░[22;40m█[1;47;31m▐[22;40m     [0m
[0m[40m    [1;31m  [22;43m▄[1;47;31m█[40m███[43m▓░░░▀░[22;40;33m█[1;43;31m▓[22;40;33m█▓▓[37m [1;33m██████████████████████[37m██[33m█[47m▌[22;40m██▌[33m▐[1;43;31m▓[40m█[47m▌[33m░░░[31m  ▌[40m███[43m████[22;40;33m█[1;43;31m▐[47m█[22;40m█[1;47;33m░[40;31m▌     [0m
[0m[40m     [43m▄[47m█[40m██[43m█▓░[22;40;33m [1;31m▄▄[22;33m▄▀▀[1;43;31m░░[22;40;33m▀[37m  [1;33m███████████████████████[47m▓▓▄▄[22;40m██[1;31m [43m░[40m██[47m▄ ░░▄[40m███[43m██[47m▓▓[43m▓[22;40;33m█[1;31m█[47m▓[22;40m█[1;47;31m▄[22;40m      [0m
[0m[40m    [1;47;31m▀░[43m████▀[22;40;33m▀[37m [1;43;31m▀[47m▄▓[43m▓▄[22;40;33m▄[37m    [1;33m████████████████████[47m▀▀[22;40m███████▌[33m▐[1;43;31m▀[40m███[47m▓▓[40m████[43m██[47m▓[43m█▌▐[40m█[47m░▄[22;40m       [0m
[0m[40m   ▐[1;47;33m▓[22;40m█[1;47;31m▓[43m▀[22;40;33m▀▄[1;31m▄[47m▀[43m▄[22;40;33m▄▀▀▓[1;43;31m▀[22;40;33m█[1;31m█[22;33m▄[1;31m▄▄[22;33m▄[1m▀████████████████[47m▄[40m████[47m▓▓░░[22;40m███[1;31m [43m ▀[40m████████[43m█▌█▓[22;40;33m▓[1;31m█[47m▓▄[22;40m        [0m
[0m[40m    [33m▀[37m▀ [33m▄[1;43;31m▄[47m▀▓▓[40m█[43m▀░▓▄[22;40;33m▄▓█[1;31m▌[43m▐[47m▓[43m█[22;40;33m▌[1m▐███████████████████[47m▀▀[40m▀[22m▀▀▀▀ [1;43;31m░░▓▓[40m██████[43m██ ▓ [40m█[47m▓▄[22;40m         [0m
[0m[40m  [33m ▄▐[1;31m█[22;33m▄▀[1;43;31m▓▓[22;40;33m▄▀[1;31m██[22;33m▄▀[1;43;31m▓▓[22;40;33m▄▓[1;31m█▄▀[22m [1;33m▄██████████████[47m▀▀[40m▀▀▀[22m▄▄[1;31m▄[43m▄▄[40m████████[47m▓▓[40m███[43m██▌[22;40;33m▓[1;43;31m░[40m▐[47m▓▄[22;40m          [0m
[0m[40m  [33m▐[1;47;31m▓[40m▄[22;33m▀[1;47;31m▓[43m▄[22;40;33m▄[1;43;31m▓[47m▓[22;40;33m▄▀[1;43;31m▀[47m▓[22;40;33m▄▀[1;43;31m▄▓[22;40;33m▄▓[1;31m██[22m [1;33m▄[37m▄▄▄[33m▄[22m [37m▀▀▀[1;33m▀▀▀▀▀[22m▄▄[1;31m▄[43m▄▄[40m███████[47m▓▓▓▀▀▄[40m██[43m▓▓▓[40m█[43m▀░[22;40;33m█[1;43;31m░[22;40;33m▌[1;31m█[47m▄[22;40m           [0m
[0m[40m   [33m▀[1;43;31m▀[22m▄[40;33m▄[1;31m▀[22;33m▀▀[1;43;31m▀[40m█[43m▄[22;40m [1;43;31m▀[40m█[22;33m▄▀[1;43;31m▀[40m▓[22;33m [1;47;31m▓▓[22;40;33m▌[1m▐████▐█▌[22m▓[1;43;31m░▓[40m██████[47m███▀▀▀▓▓▓▄▄▄[40m███[43m▓▓░░[22;40;33m██[1;43;31m▓▓[22;40;33m▌[1;43;31m▓[40m▐[47m▄[22;40m            [0m
[0m[40m   [33m█▄▀[1;31m▀▀[22;33m▀░░▀[1;31m▓▓[22;33m▄▀[1;31m▓▓[22m [33m░▓[1;43;31m▓█[22;40;33m▌[1m▐██████▌[31m▐██[47m▓▓▓▓▓▄▄▓▄▄▄▄[40m███[43m▓▓▓▓▓░░░[22;40;33m█▀█[1;43;31m▄█▓[22;40;33m▐[1;31m█[47m▓[22;40m             [0m
[0m[40m   [33m [1;31m▒▀▓███[43m▄▄[40m▄▄[22;33m▄[1;31m▓[22;33m▄▄▓[1;43;31m▐▐▐▀[40;33m ███████▌[31m▐[43m▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░[22;40;33m▀▀▄█[1;43;31m▄▓██ [40m █              [0m
[0m[40m[22m    [33m ▀▄[1;31m▓▓█[47m▓▓[40m█[43m▓▓▀▀[22;40;33m█[1;43;31m▀[22;40;33m█[1;43;31m▐▐[22;40;33m▌[1m▐████[47m▓▓▓[22;40m [33m▐[1;43;31m░░░░░░░░░░░    [22;40;33m▀▀▓▓▄▄█[1;43;31m▄▄▓▓[40m█[43m██▀[22;40;33m [1;31m█               [0m
[0m[40m     [22;33m [37m   [33m ▀▀[1;31m▀[43m▀▀▓▓▓░░[22;40;33m██[1m [47m▓▓▓[40m█[22m░[1;47;33m░░░[22;40m [33m▓▓▓▓███[1;43;31m     ▀▀▀ ▄▄▄▓▓▓▓██████[40m▓[22;33m ▀                [0m
[0m[40m        [1;30m▄        [22;33m▀▀▀▀[1m [47m ░░░[22;40m▓▐[1;47;33m  [22;40m▌[33m░▓[1;43;31m░░▒▒▓▓█████▓▓▓▓▓▓▓█████[40m▓▓▀▀[22;33m▀ [1;37m▄                 [0m
[0m[40m        [22m▐[1;47;33m▄     ▄[22;40m█          ▀▀▀[31m ▄▄▄▄▄[33m▀▀▀█[1;43;31m▀▀▀▀▀▀▀[22;40;33m██▀▀▀▀▀[31m▄▄▄▄[1;41;37m░▒▓██[22;40m                 [0m
[0m[40m         [1;47;33m▓[22;40m▌   [1;30m▐[47;33m▓[22;40m▌        [31m█████████████▄▄▄▄▄▄▄[1;37m    [22;31m█[1;41m░▓██▓▒░[22;40m█[1;41;37m░▒▓██[22;40m                 [0m
[0m[40m         [1;47;33m░[22;40m▌   ▐[1;47;33m░         [22;40;31m▀▀▓▓▓▓▓▓▓▓▓▓▓▓▀▀▀▓▓▓[37m [1;47;33m▄[22;40m▌ [31m▓▓[1m▓▓▓▓▓[22m▓▓▓[1;37m▓▓▓▓                 [0m
[0m[40m         [47;30m▌[22;40m▌   [1;47;30m▌[22;40m▌      ▐[1;47;33m█     [22;40;31m▒▒▒▒▒▒▒▒▒▒[37m ▄ [31m░░░[37m [1;47;33m▓[22;40m▌        [31m░░░[1;37m░░░░                 [0m
[0m[40m         [47;30m▌[22;40m▌   [1;47;33m░[22;40m▌      [1;47;30m▌[33m▓[22;40m █▄  [31m░░░░░░░░░░[37m [1;47;33m▓     ▒[40;30m▌[22m  ▄▄[1;30m▄                           [0m
[0m[40m         [22m▐[1;47;30m▐[22;40m   [1;47;33m▓[40;30m▌      [22m▐[1;47;33m░[40;30m▐[47;33m▓[22;40m▌             [1;47;33m▒[22;40m▌    [1;47;33m░[22;40m ▄█[1;47;30m▄[22;40m █[1;30m▌[22m▄█[1;47;30m▀[22;40m    [1;30m▄                  [0m
[0m[40m         [22m▐[1;47;30m▐[22;40m   [1;47;33m░[22;40m ▄[1;47;33m░[22;40m▄█[1;30m▄[22m ▐▌▐[1;47;33m░              ░[22;40m▌    ██▀[1;47;33m░▓[40;30m▄[22m█▐[1;47;33m░[22;40m▄    █[1;47;33m▄ [22;40m [1;30m▄[22m▄▄[1;30m▄[22m [1;30m▄[22m▄▄        [0m
[0m[40m         ▐[1;47;33m░[22;40m   ██▀[1;47;30m▄[22;40m█▀█[1;47;30m▀[22;40m█▌▐[1;47;30m▐[22;40m [1;47;30m▀[22;40m█     [1;30m▄[22m▄▄   [1;47;30m▌▐[22;40m  ▄█[1;47;33m░[22;40m  ▀██▀ [1;30m▀[47m▄[22;40m█  ▐[1;47;33m▓[30m▄[33m░░[22;40m█[1;47;30m▄[22;40m▀▀▀[1;30m▀          [0m
[0m[40m         ▐[47;33m░[22;40m  █[1;47;33m░      [22;40m▀[1;47;30m▌[22;40m▌▐[1;47;30m▐[22;40m▐[1;47;33m░[22;40m  [1;30m▄[22m▄[1;47;30m▀▄[22;40m▀[1;30m▀[22m    ▐[1;47;33m░[22;40m █▀ █        [1;30m▐[22m█▌ [1;47;33m░░[22;40m █                 [0m
[0m[40m          █   [1;47;33m░       [22;40m▐▌[1;30m▐[22m█ [1;47;30m▄[22;40m██[1;47;30m▄[40m▀        [22m▐█    █        ▐█  [1;30m▀                    [0m
[0m[40m         [22m▐█   █       [1;30m▐[22m█ █              [1;30m▐[22m█▌   █[1;30m▌       [22m█▌                       [0m
[0m[40m          █[1;30m▌[22m  █[1;30m▌       [22m█  ▀              [1;47;30m▄[22;40m▌   █[1;30m▌      [22m▐█                        [0m
[0m[40m          [1;30m▀[22m▀  ▐▌       ▐▌                     █▌      █▌                        [0m
[0m[40m               ▀        █                     █▌     ▐█[1;30m▌                        [0m
[0m[40m                                              [22m▀       ▀                         [0m
[0m[40m→SAUCE00hulk smash                         nail                blocktronics     [0m
[0m[40m   20200204½*  ☺☺P C      ¶IBM VGA                                              [0m
[0m
    """
  fabulous =
    """
 |  ___/ \  | __ )| | | | |   / _ \| | | / ___| 
 | |_ / _ \ |  _ \| | | | |  | | | | | | \___ \ 
 |  _/ ___ \| |_) | |_| | |__| |_| | |_| |___) |
 |_|/_/   \_\____/ \___/|_____\___/ \___/|____/ 
                                                
    """
  aerith =
    """
Aerith's theme

/instrument organ
/tempo 74
/play /8 d-,a-,e,f# a /2 f#,d+ /8 e-,e,c+ a /2 c,e /8 d-,a-,e,f# a d+ c#+ e+ d+ b c#+ /2 e-,c,a /2 c,e
    """

proc main*(port: int) =
  let
    sysopKeys = block:
      let path = "tests/privkey"
      if os.fileExists(path):
        echo "Using existing sysop key"
        let privKeyStr = readFile(path)
        var privKey: ed25519.PrivateKey
        copyMem(privKey.addr, privKeyStr[0].unsafeAddr, privKeyStr.len)
        ed25519.initKeyPair(privkey)
      else:
        raise newException(Exception, "Can't find " & path)
        #echo "Creating new sysop key"
        #let keys = ed25519.initKeyPair()
        #writeFile(path, keys.private)
        #keys
    board = paths.encode(sysopKeys.public)
    readPort =
      when defined(release):
        "80"
      else:
        $port
  assert board == paths.defaultBoard, "You must set paths.defaultBoard to " & board
  echo "Test run...open this link in the terminal client:"
  echo "http://localhost:" & readPort & "#board:" & board
  let boardDir = paths.staticFileDir / paths.boardsDir / board
  if os.dirExists(boardDir):
    return
  os.createDir(boardDir)
  var c = client.initClient("http://localhost:" & $port)
  client.start(c)
  let sysop = entities.User(public_key: board)
  discard client.submit(c, "ansiwave", common.signWithHeaders(sysopKeys, logo, sysop.public_key, common.Edit, board).body)
  let
    subboard1 = common.signWithHeaders(sysopKeys, subboard1Text, sysop.public_key, common.New, board)
    subboard2 = common.signWithHeaders(sysopKeys, subboard2Text, sysop.public_key, common.New, board)
    subboard3 = common.signWithHeaders(sysopKeys, subboard3Text, sysop.public_key, common.New, board)
  discard client.submit(c, "ansiwave", subboard1.body)
  discard client.submit(c, "ansiwave", subboard2.body)
  discard client.submit(c, "ansiwave", subboard3.body)
  let
    aliceKeys = ed25519.initKeyPair()
    bobKeys = ed25519.initKeyPair()
    alice = entities.User(public_key: paths.encode(aliceKeys.public))
    bob = entities.User(public_key: paths.encode(bobKeys.public))
  discard client.submit(c, "ansiwave", common.signWithHeaders(aliceKeys, "Hi i'm alice", alice.public_key, common.Edit, board).body)
  discard client.submit(c, "ansiwave", common.signWithHeaders(bobKeys, "Hi i'm bob", bob.public_key, common.Edit, board).body)
  discard client.submit(c, "ansiwave", common.signWithHeaders(sysopKeys, "moderator", bob.public_key, common.Tags, board).body)
  discard client.submit(c, "ansiwave", common.signWithHeaders(bobKeys, "", alice.public_key, common.Tags, board).body)
  discard client.submit(c, "ansiwave", common.signWithHeaders(bobKeys, aerith, subboard2.sig, common.New, board).body)
  let jabba = common.signWithHeaders(bobKeys, jabbaAnsi, subboard1.sig, common.New, board)
  discard client.submit(c, "ansiwave", jabba.body)
  discard client.submit(c, "ansiwave", common.signWithHeaders(aliceKeys, "That ansi is\n" & fabulous, jabba.sig, common.New, board).body)
  discard client.submit(c, "ansiwave", common.signWithHeaders(sysopKeys, "The people demand more jabba", jabba.sig, common.New, board).body)
  let hogan = common.signWithHeaders(bobKeys, hoganAnsi, subboard1.sig, common.New, board)
  discard client.submit(c, "ansiwave", hogan.body)
  discard client.submit(c, "ansiwave", common.signWithHeaders(aliceKeys, "I love hogan", hogan.sig, common.New, board).body)

